YUI.add("gallery-rocket-list-view",function(e,t){"use strict";var n=e.RChildViewContainer,r=e.Base.create("rocketListView",e.RView,[],{_showingEmptyView:!1,children:null,initializer:function(e){this._initChildViewStorage()},destructor:function(){this.removeItemViews()},_initChildViewStorage:function(){this.children=new n},bindUI:function(){this.get("modelList")&&(this.listenTo(this.get("modelList"),"add",this.onAddChildView,this),this.listenTo(this.get("modelList"),"remove",this.onRemoveItemView,this),this.listenTo(this.get("modelList"),"reset",this.render,this),this.listenTo(this.get("modelList"),"*:change",this.onRefreshItemView,this)),r.superclass.bindUI.call(this)},onAddChildView:function(e){this.removeEmptyView();var t=this.get("itemView"),n=this.get("modelList").indexOf(e.model);this.addItemView(e.model,t,e.index)},onRefreshItemView:function(e){var t=this.children.findByModel(e.target);t.render()},onRemoveItemView:function(e){var t=this.children.findByModel(e.model);this.removeItemView(t),this.checkEmpty()},renderer:function(){this._renderChildren()},_renderChildren:function(){this.removeItemViews(),this.get("modelList")&&this.get("modelList").size()>0?this.showList():this.showEmptyView()},showList:function(){this.get("modelList").each(function(e,t){this.addItemView(e,this.get("itemView"))},this)},showEmptyView:function(){var t=this.get("emptyView");t&&!this._showingEmptyView&&(this._showingEmptyView=!0,this.addItemView(new e.Model,t,0))},removeItemView:function(e){e&&(this.stopListening(e),e.removeTarget(this),e.destroy(!0),this.fire("itemRemoved",e))},removeItemViews:function(){this.children.each(function(e){this.removeItemView(e)},this),this.checkEmpty()},removeEmptyView:function(){this._showingEmptyView&&this.removeItemViews()},buildItemView:function(e,t){return new t({model:e})},addItemView:function(e,t,n){var r=this.buildItemView(e,t);r.addTarget(this),this.fire("beforeItemAdd",{view:r}),this.children.add(r),this.renderItemView(r,n),this._isShown&&r.show(),this.fire("afterItemAdded",{view:r})},renderItemView:function(t,n){var r=e.guid(),i=e.Node.create("<"+this.get("itemTag")+">");i.set("id",r),i.appendTo(this.get("container")),t.set("container",i),t.render()},checkEmpty:function(){(!this.get("modelList")||this.get("modelList").size()===0)&&this.showEmptyView()}},{ATTRS:{itemView:{value:null},emptyView:{value:null},itemTag:{value:"li"},modelList:{value:null}}});e.RListView=r},"0.1.0",{requires:["gallery-rocket-view","handlebars","gallery-rocket-child-view-container"]});
